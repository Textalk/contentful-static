{"version":3,"sources":["index.es6.js"],"names":[],"mappings":"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","file":"index.es5.js","sourcesContent":["'use strict';\n\nimport axios from 'axios';\nimport resolveResponse from 'contentful-resolve-response';\nimport querystring from 'querystring';\n\nexport function createClient (options) {\n  return new Client(options || {});\n};\n\nclass Client {\n  constructor ({accessToken, space, secure, host}) {\n    if (!accessToken) {\n      throw new TypeError('Expected property accessToken');\n    }\n\n    if (!space) {\n      throw new TypeError('Expected property space');\n    }\n\n    const insecure = secure === false;\n    var [hostname, port] = (host && host.split(':')) || [];\n\n    hostname = hostname || 'cdn.contentful.com';\n    port = port || (insecure ? 80 : 443);\n\n    this.options = {\n      baseUrl: `${insecure ? 'http' : 'https'}://${hostname}:${port}/spaces/${space}`,\n      accessToken: accessToken\n    };\n  }\n\n  _request (path, query) {\n    if (!query) {\n      query = {}\n    };\n\n    query.access_token = this.options.accessToken;\n\n    const params = {\n      headers: {},\n      method: 'get',\n      url: `${this.options.baseUrl}${path}?${querystring.stringify(query)}`\n    };\n\n    params.headers['Content-Type'] = 'application/vnd.contentful.delivery.v1+json';\n\n    return axios(params)\n      .then(function (response) {\n        return response.data;\n      })\n      .catch(function (error) {\n        throw error.data;\n      });\n  }\n\n  asset (id, callback) {\n    return nodeify(\n      this._request('/assets/' + id).then(parseResource),\n      callback\n    );\n  }\n\n  assets (object, callback) {\n    const query = new Query(object);\n    const deferred = this._request('/assets', query).then(parseSearchResult);\n    return nodeify(deferred, callback);\n  }\n\n  contentType (id, callback) {\n    const deferred = this._request('/content_types/' + id).then(ContentType.parse);\n    return nodeify(deferred, callback);\n  }\n\n  contentTypes (object, callback) {\n    const query = new Query(object);\n    const deferred = this._request('/content_types', query).then(parseSearchResult);\n    return nodeify(deferred, callback);\n  }\n\n  entry (id, callback) {\n    const deferred = this._request('/entries/' + id)\n                   .then(Entry.parse);\n    return nodeify(deferred, callback);\n  }\n\n  entries (object, callback) {\n    const query = new Query(object);\n    const deferred = this._request('/entries', query).then(parseSearchResult);\n    return nodeify(deferred, callback);\n  }\n\n  space (callback) {\n    return nodeify(this._request(''), callback);\n  }\n\n  _pagedSync (sync) {\n    const self = this;\n    return this._request('/sync', sync.query)\n               .then(function (data) {\n                 sync.append(data);\n\n                 if (!sync.done) {\n                   return self._pagedSync(sync);\n                 } else {\n                   return {\n                     items: sync.items,\n                     nextSyncToken: sync.nextSyncToken\n                   };\n                 }\n               });\n  }\n\n  sync (object, callback) {\n    if (!object || (!object.initial && !object.nextSyncToken)) {\n      throw new Error('Please provide either the initial flag or a nextSyncToken for syncing');\n    }\n    const query = new Query(object);\n    const deferred = this._pagedSync(new Sync(query)).then(function (response) {\n      response.items = parseSearchResult(response);\n      return response;\n    });\n    return nodeify(deferred, callback);\n  }\n}\n\nclass Asset {\n  constructor ({sys, fields}) {\n    this.sys = new Sys(sys);\n    this.fields = fields;\n  }\n\n  static parse (object) {\n    return new Asset(object);\n  }\n}\n\nclass Entry {\n  constructor ({sys, fields}) {\n    this.sys = new Sys(sys);\n    this.fields = fields;\n  }\n\n  static parse (object) {\n    return new Entry(object);\n  }\n}\n\nclass ContentType {\n  constructor ({sys, fields, name, displayField}) {\n    this.sys = new Sys(sys);\n    this.name = name;\n    this.displayField = displayField;\n    this.fields = fields && fields.map(Field.parse);\n  }\n\n  static parse (object) {\n    return new ContentType(object);\n  }\n}\n\nclass Field {\n  constructor (object) {\n    for (var k in object) {\n      this[k] = object[k];\n    }\n  }\n\n  static parse (object) {\n    return new Field(object);\n  }\n}\n\nclass Query {\n  constructor (object) {\n    for (var k in object) {\n      this[k] = object[k];\n    }\n  }\n\n  toQueryString () {\n    return querystring.stringify(this);\n  }\n\n  static parse (object) {\n    return new Query(stringifyArrayValues(object));\n  }\n}\n\nclass Space {\n  static parse (object) {\n    return new Space(object);\n  }\n\n  constructor (props = {}) {\n    for (let k in props) {\n      this[k] = props[k]\n    }\n  }\n}\n\nclass Sys {\n  constructor ({id, revision, type, locale, contentType, createdAt, linkType, updatedAt, space}) {\n    this.id = id;\n    this.revision = revision;\n    this.type = type;\n    this.locale = locale;\n    this.space = space && Link.parse(space);\n    this.contentType = contentType && new Link(contentType);\n    this.createdAt = createdAt && new Date(createdAt);\n    this.updatedAt = updatedAt && new Date(updatedAt);\n  }\n\n  static parse (object) {\n    return new Sys(object);\n  }\n}\n\nclass Link {\n  constructor ({sys}) {\n    this.sys = new Sys(sys);\n  }\n\n  static parse (object) {\n    return new Link(object);\n  }\n}\n\nclass Sync {\n  constructor (query) {\n    this.query = query;\n    this.items = [];\n    this.done = false;\n  }\n\n  append (data) {\n    this.items = this.items.concat(data.items);\n\n    if (data.nextPageUrl) {\n      const nextPageUrl = data.nextPageUrl.split('?');\n      this.query = Object.keys(this.query).reduce((query, key) => {\n        if (key !== 'initial' && key !== 'type' && key !== 'sync_token') {\n          query[key] = this.query[key]\n        }\n        return query\n      }, {})\n      this.query.sync_token = querystring.parse(nextPageUrl[1]).sync_token;\n    } else if (data.nextSyncUrl) {\n      const nextSyncUrl = data.nextSyncUrl.split('?');\n      this.nextSyncToken = querystring.parse(nextSyncUrl[1]).sync_token;\n      this.done = true;\n    }\n  }\n}\n\nconst parseableResourceTypes = {\n  Asset: Asset,\n  ContentType: ContentType,\n  Entry: Entry,\n  Space: Space\n};\n\nfunction isParseableResource (object) {\n  return object && object.sys && object.sys.type in parseableResourceTypes;\n}\n\nfunction parseResource (resource) {\n  var Type = parseableResourceTypes[resource.sys.type];\n  return Type.parse(resource);\n}\n\nfunction parseSearchResult (object) {\n  walkMutate(object, isParseableResource, parseResource);\n  const items = resolveResponse(object);\n  Object.defineProperties(items, {\n    limit: { value: object.limit, enumerable: false },\n    skip:  { value: object.skip,  enumerable: false },\n    total: { value: object.total, enumerable: false }\n  });\n  return items;\n}\n\nfunction stringifyArrayValues (object) {\n  return keys(object).reduce(function (result, key) {\n    const value = object[key];\n    result[key] = Array.isArray(value) ? value.join(',') : value;\n    return result;\n  }, {});\n}\n\nfunction walkMutate (input, pred, mutator) {\n  if (pred(input)) {\n    return mutator(input);\n  }\n\n  if (input && typeof input === 'object') {\n    for (var key in input) {\n      input[key] = walkMutate(input[key], pred, mutator);\n    }\n  }\n\n  return input;\n}\n\nfunction nodeify (deferred, callback) {\n  if (callback) {\n    return deferred\n    .then(function (response) {\n      callback(null, response);\n      return response;\n    })\n    .catch(function (error) {\n      callback(error);\n      throw error;\n    });\n  }\n  return deferred;\n}\n"]}